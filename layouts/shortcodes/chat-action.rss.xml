{{ $type := .Get "type" | default "action" }}
{{ $from := .Get "from" }}
{{ $time := .Get "time" }}
{{ $colorKey := substr (md5 $from) 0 1 }}
{{ $colors := dict 
  "0" "#ef5350" "1" "#ec407a" "2" "#ab47bc" "3" "#7e57c2" 
  "4" "#5c6bc0" "5" "#42a5f5" "6" "#29b6f6" "7" "#26c6da" 
  "8" "#26a69a" "9" "#66bb6a" "a" "#9ccc65" "b" "#d4e157" 
  "c" "#ffee58" "d" "#ffca28" "e" "#ffa726" "f" "#ff7043" 
}}
{{ $userColor := index $colors $colorKey }}
<div>
  {{ if $time }}<font color="#777777">[{{ $time }}]</font> {{ end }}
  {{ if eq $type "join" }}
    <font color="#4caf50"><i>*** <font color="{{ $userColor }}"><b>{{ $from }}</b></font> has joined</i></font>
  {{ else if eq $type "leave" }}
    <font color="#ff5722"><i>*** <font color="{{ $userColor }}"><b>{{ $from }}</b></font> has left</i></font>
  {{ else }}
    <font color="#e040fb"><i>* <font color="{{ $userColor }}"><b>{{ $from }}</b></font> {{ .Inner | markdownify }}</i></font>
  {{ end }}
</div>
